import numpy as np

# Extracted from utils/basic/sympy_regression.py
# Format: (X_catapults, Y_current_level) -> Z_next_level

# X_vals: catapult count (first element of tuple)
X_vals = np.array(
    [
        25,
        25,
        25,
        25,
        25,
        25,
        25,
        25,
        25,
        25,
        25,
        25,
        25,
        25,
        25,
        25,
        25,
        25,
        25,
        25,
        25,
        25,
        25,
        25,
        25,
        50,
        50,
        50,
        50,
        50,
        50,
        50,
        50,
        50,
        50,
        50,
        50,
        50,
        50,
        50,
        50,
        50,
        50,
        50,
        50,
        50,
        50,
        50,
        75,
        75,
        75,
        75,
        75,
        75,
        75,
        75,
        75,
        75,
        75,
        75,
        75,
        75,
        75,
        75,
        75,
        75,
        75,
        75,
        75,
        100,
        100,
        100,
        100,
        100,
        100,
        100,
        100,
        100,
        100,
        100,
        100,
        100,
        100,
        100,
        100,
        100,
        150,
        150,
        150,
        150,
        150,
        150,
        150,
        150,
        150,
        150,
        150,
        150,
        150,
        150,
        150,
        200,
        200,
        200,
        200,
        200,
        200,
        200,
        200,
        200,
        200,
        200,
        200,
        200,
        200,
        1000,
        500,
        1100,
        750,
        750,
        500,
        350,
        281,
        282,
        282,
        281,
        280,
        279,
        278,
        277,
        276,
        275,
        274,
        273,
        272,
        271,
        270,
        269,
        268,
        267,
        37,
        37,
        20,
        15,
        5,
        5,
        # New data points:
        900,
        800,
        700,
        600,
        1000,
        500,
        750,
        775,
        790,
        # More data points in 300-600 range:
        400,
        450,
        445,
        335,
        335,
        335,
        420,
        567,
        567,
        # More data points in high range (900-1166):
        1155,
        1166,
        1122,
        1111,
        1099,
        1077,
        1044,
        1022,
        1005,
        1005,
        1001,
        933,
        933,
        978,
        905,
        905,
        905,
    ]
)

# Y_vals: current level (second element of tuple)
Y_vals = np.array(
    [
        30,
        29,
        28,
        27,
        26,
        25,
        24,
        23,
        22,
        21,
        20,
        19,
        18,
        17,
        16,
        15,
        14,
        13,
        12,
        11,
        10,
        9,
        8,
        7,
        6,
        30,
        29,
        28,
        27,
        26,
        25,
        24,
        23,
        22,
        21,
        20,
        19,
        18,
        17,
        16,
        15,
        14,
        13,
        12,
        11,
        10,
        9,
        30,
        29,
        28,
        27,
        26,
        25,
        24,
        23,
        22,
        21,
        20,
        19,
        18,
        17,
        16,
        15,
        14,
        13,
        12,
        11,
        30,
        29,
        28,
        27,
        26,
        25,
        24,
        23,
        22,
        21,
        20,
        19,
        18,
        17,
        16,
        15,
        14,
        13,
        30,
        29,
        28,
        27,
        26,
        25,
        24,
        23,
        22,
        21,
        20,
        19,
        18,
        17,
        16,
        15,
        30,
        29,
        28,
        27,
        26,
        25,
        24,
        23,
        22,
        21,
        20,
        19,
        18,
        17,
        30,
        30,
        30,
        30,
        27,
        27,
        27,
        27,
        27,
        26,
        26,
        26,
        26,
        26,
        26,
        26,
        26,
        26,
        26,
        26,
        26,
        26,
        26,
        26,
        26,
        20,
        15,
        10,
        8,
        5,
        4,
        # New data points:
        29,
        28,
        27,
        25,
        29,
        24,
        27,
        27,
        27,
        # More data points in 300-600 range:
        27,
        27,
        23,
        23,
        28,
        29,
        29,
        29,
        28,
        # More data points in high range (900-1166):
        30,
        30,
        30,
        30,
        30,
        30,
        30,
        30,
        30,
        29,
        29,
        29,
        30,
        30,
        28,
        29,
        30,
    ]
)

# Z_known: next level (values, excluding all zeros) - THESE ARE ROUNDED VALUES!
Z_known = np.array(
    [
        29,
        28,
        27,
        26,
        25,
        24,
        23,
        22,
        21,
        20,
        19,
        17,
        16,
        15,
        14,
        13,
        12,
        10,
        9,
        8,
        6,
        5,
        4,
        2,
        1,
        29,
        28,
        27,
        25,
        24,
        23,
        22,
        21,
        19,
        18,
        17,
        16,
        14,
        13,
        12,
        10,
        9,
        8,
        6,
        5,
        3,
        1,
        28,
        27,
        26,
        25,
        23,
        22,
        21,
        20,
        18,
        17,
        16,
        14,
        13,
        11,
        10,
        8,
        7,
        5,
        3,
        1,
        27,
        26,
        25,
        24,
        22,
        21,
        20,
        18,
        17,
        16,
        14,
        13,
        11,
        9,
        8,
        6,
        4,
        2,
        26,
        25,
        24,
        22,
        21,
        19,
        18,
        16,
        14,
        13,
        11,
        9,
        7,
        5,
        3,
        1,
        25,
        24,
        22,
        20,
        19,
        17,
        16,
        14,
        12,
        10,
        8,
        6,
        4,
        2,
        5,
        17,
        2,
        11,
        3,
        11,
        16,
        18,
        18,
        16,
        16,
        16,
        16,
        16,
        16,
        16,
        16,
        16,
        16,
        16,
        16,
        16,
        16,
        16,
        17,
        18,
        12,
        7,
        5,
        4,
        3,
        # New data points:
        4,
        4,
        4,
        2,
        2,
        3,
        3,
        2,
        1,
        # More data points in 300-600 range:
        14,
        12,
        3,
        8,
        18,
        20,
        17,
        13,
        11,
        # More data points in high range (900-1166):
        1,
        1,
        2,
        2,
        2,
        3,
        4,
        4,
        5,
        1,
        2,
        3,
        7,
        5,
        1,
        4,
        7,
    ]
)

# -----------------------------------------------------------------------------
# Data cleanup: remove conflicting duplicate labels
#
# The same (X, Y) appears twice with different Z for these keys:
#   (50, 30): {28, 29}
#   (75, 29): {26, 27}
#
# Per user confirmation, the real mappings are:
#   (50, 30) -> 29
#   (75, 29) -> 27
#
# So we drop the opposite rows:
#   (50, 30) -> 28
#   (75, 29) -> 26
# -----------------------------------------------------------------------------

_drop_mask = ((X_vals == 50) & (Y_vals == 30) & (Z_known == 28)) | (
    (X_vals == 75) & (Y_vals == 29) & (Z_known == 26)
)

if np.any(_drop_mask):
    _keep = ~_drop_mask
    X_vals = X_vals[_keep]
    Y_vals = Y_vals[_keep]
    Z_known = Z_known[_keep]

assert len(X_vals) == len(Y_vals) == len(Z_known)
